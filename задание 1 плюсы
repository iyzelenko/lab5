#include <iostream>
#include <cmath>

using namespace std;

int main() {
    // Значения аргумента и функции
    double x[] = {-1.0, 0.0, 1.0, 2.0, 3.0};
    double y[] = {-0.5, 0.0, 0.5, 0.86603, 1.0};

    // Количество точек
    int n = sizeof(x) / sizeof(x[0]);

    // Вычисляем первую производную по формуле центральных разностей
    double h = x[1] - x[0];
    double dy[n];
    for (int i = 1; i < n - 1; i++) {
        dy[i] = (y[i + 1] - y[i - 1]) / (2 * h);
    }

    // Вычисляем вторую производную по формуле центральных разностей
    double d2y[n];
    for (int i = 1; i < n - 1; i++) {
        d2y[i] = (dy[i + 1] - dy[i - 1]) / (2 * h);
    }

    // Интерполируем производные в точке x = 1.0 с помощью метода наименьших квадратов
    double A[2][2] = {{1.0, 1.0}, {1.0, 2.0}};
    double b[2] = {-dy[1], -d2y[1]};
    double X[2];

    // Решаем систему линейных уравнений
    X[0] = (b[0] * A[1][1] - b[1] * A[0][1]) / (A[0][0] * A[1][1] - A[0][1] * A[1][0]);
    X[1] = (b[1] * A[0][0] - b[0] * A[1][0]) / (A[0][0] * A[1][1] - A[0][1] * A[1][0]);

    // Вычисляем первую и вторую производные в точке x = 1.0
    double dy_1 = X[0] + X[1];
    double d2y_1 = 2 * X[1];

    // Выводим результат
    cout << "Первая производная в точке x = 1.0: " << dy_1 << endl;
    cout << "Вторая производная в точке x = 1.0: " << d2y_1 << endl;

    return 0;
}
